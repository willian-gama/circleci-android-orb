description: Initial setup to download android and ruby (fastlane) dependencies.

parameters:
  resource_class:
    type: enum
    description: Configure the executor resource class
    enum: ["medium", "large", "xlarge"]
    default: xlarge

executor:
  name: android_executor
  resource_class: << parameters.resource_class >>

steps:
  - checkout
  - generate_user_properties
  - generate_gradle_cache_key
  - restore_gradle_cache
  - run:
      name: Download android dependencies
      command: <<include(scripts/download_android_dependencies.sh)>>
  - run:
      name: Assemble build
      command: <<include(scripts/assemble_build.sh)>>
  - save_gradle_cache
  - persist_workspace